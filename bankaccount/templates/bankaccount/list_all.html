{% extends 'bankaccount/base.html' %}
{% load humanize %}

{% block header %}

  <li><a href="">口座情報</a></li>
  <li><a href="" class="margin_left_l">仕訳区分</a></li>

  <ul class="page_nav margin_left_l">
    <li>
      {% if page_obj.has_previous %}
        <a class="menu_bt next_bt" href="?{{ query_string }}&page={{ page_obj.previous_page_number }}" onclick="set_search_key(), count_key_clear()">
          ＜
        </a>
      {% else %}
      {% endif %}
    </li>
  
    <li class="margin_left">
      {% if page_obj.has_next %}
        <a class="menu_bt next_bt" href="?{{ query_string }}&page={{ page_obj.next_page_number }}" onclick="set_search_key(), count_key_clear()">
          ＞
        </a>
      {% else %}
      {% endif %}
    </li>
  </ul>

{% endblock%}


{% block content %}

<form method="POST" class="menu_wrapper" enctype="multipart/form-data">{% csrf_token %}

  <dl class="margin_right">
    <dt>
      <input type="button" class="menu_bt yubi" id="search_btn" onclick="set_search_key(),submit();" value="口座切替">
    </dt>

    <dd class="margin_top">
      {{search_form.bankAccount}}
    </dd>
  </dl>

  <dl class="margin_right">
    <dt>
      <input class="menu_bt yubi" type="submit" value="仕訳登録" name="bt_journalCategory" onclick="set_search_key()">
    </dt>

    <dd class="margin_top">
      {{search_form.journalCategory}}
    </dd>
  </dl>

  <dl class="hidden_s_screen margin_top_l margin_bottom_l">
    <dt class="menu_wrapper_inner">
      <button class="menu_bt yubi" type="submit" name="bt_import"  onclick="set_search_key()">データ取込</button>
      <p>&nbsp; &#8658; &nbsp;</p>
      <input class="menu_bt yubi margin_left" type="submit" value="整合性確認" name="bt_correspondence" onclick="set_search_key(), count_key_clear()">
    </dt>

    <dd class="margin_top">
      <input type="file" name="csv" accept=".csv">
    </dd>
  </dl>

  <!-- record id 自動入力 type="hidden"-->
  <input type="hidden" name="selected_record_list" id="selected_record_list">
</form>



<table class="item-table">

	<tr>
		<th class="sticky_col_th first_col">選択</th>
		<th class="sticky_col_th second_col">No.</th>
    <th>日付</th>
    <th>口座区分</th>
    <th>記載1</th>
    <th>記載2</th>
    <th>支払額</th>
    <th>受取額</th>
    <th>残高</th>
    <th>仕訳区分</th>
		<th>進捗</th>
    <th>メモ</th>

  </tr>
  
  {% for item in object_list %}

  <!-- 進捗状況に応じた色の設定 -->

    {% if item.journalCategory.no == 0 %}
    <tr class="row-yellow">
    {% elif item.journalCategory.no == 1001 %}
    <tr class="row-orange">
    {% elif item.journalCategory.no == 1002 %}
    <tr class="row-blue1">
    {% elif item.journalCategory.no == 2001 %}
    <tr class="row-green">
    {% elif item.journalCategory.no == 7000 %}
    <tr class="row-blue2">
    {% elif item.journalCategory.no == 8000 %}
    <tr class="row-blue3">
    {% elif item.journalCategory.no == 9000 %}
    <tr class="row-gray">
    {% elif item.journalCategory.no == 10000 %}
    <tr class="row-red">
    {% endif %}

      <td class="sticky_col_td first_col">
        <input type="checkbox" name="selected_record" value="{{ item.pk }}" onclick="selected_record()">
      </td>

      <td class="sticky_col_td second_col"><a href="">{{ item.no }}</a></td>
      <td class="date_col">{{ item.transactionDate | date:"Y-m-j"}}</td>
      <td>{{ item.bankAccount }}</td>
      <td>{{ item.description1 }}</td>
      <td>
        {% if item.description2 %}
          {{ item.description2 }}
        {% else %}
        {% endif %}
      </td>
      <td class="number_col">{{ item.paymentAmount|intcomma}}</td>
      <td class="number_col">{{ item.deopsitAmount|intcomma}}</td>
      <td class="number_col">{{ item.accountBalance|intcomma}}</td>

      <td>
        {% if item.journalCategory %}
          {{ item.journalCategory }}
        {% else %}
        {% endif %}
      </td>
      <td>
        {% if item.progress %}
          {{ item.progress }}
        {% else %}
        {% endif %}
      </td>
      <td>
        {% if item.adminMemo %}
          {{ item.adminMemo }}
        {% else %}
        {% endif %}
      </td>
          
  </tr>

  {% endfor %}
  
</table>



{% load static %}
<script src="{% static 'bankaccount/js/list_all.js' %}"></script>
  


{% endblock content%}


